---
title: 低代码工具-更少的代码更灵活的需求
date: 2021-01-06
tags:
 - 前端工程化
categories:
 - front
---

[[toc]]

## 什么是低代码开发？

低代码开发（Low-Code Development, LCD），是2011年就被提出来的开发模式，开发者**主要通过图形化用户界面和配置**来创建应用软件。

对应的，提供给开发者的这类低代码开发功能实现的软件，称为**低代码开发平台**（Low-Code Development Platform, LCDP）。

低代码开发模式的开发者，通常不需要具备非常专业的编码技能，或者不需要某一专门领域的编码技能即可通过平台的功能和约束来实现专业代码的产出。

那么从定义中我们可以看到，低代码开发的工作方式主要依赖**操作图形化的用户界面**，包括拖拽控件，以及修改其中可被编辑区域的配置。

## 低代码开发的典型应用场景

低代码开发的一类典型应用场景是在PC端中后台系统的开发流程中，原因如下：

1. 尽管中后台系统的具体页面布局并不固定，但整体 UI 风格较统一，可以基于统一的 UI 组件库来实现搭建，通过组件拖拽组合即可灵活组织成不同形态功能的页面，因此适用于低代码类型的开发模式。
2. 中后台系统涉及数据的增删改查，需要有一定的编码调试能力，无法直接通过 UI 交互完成，因此不适用无代码开发模式。

那么以中后台系统的开发为目标，低代码开发的方式可以细分为两种：

1. 基于 JSON 的开发方式
2. 基于可视化操作平台的开发方式

## 基于编写 JSON 的低代码开发

当我们去甚是一个项目前端部分的最终呈现时，可以发现：

1. 一个项目的前端部分本质上呈现的是通过路由连接的不同页面。而前端开发的目标就是**最终输出页面的展示与交互功能**。
2. 如果学过浏览器基本原理，你就会知道：每一个页面的内容在浏览器中，最终归结为**DOM语法树（DOM Tree）+样式（Style）+动态交互逻辑（Dynamic Logic）**。
3. 在组件化开发的今天，一个规范定义的组件包含了特定功能的DOM子树和样式风格。因此页面的内容又可以定义为：**组件树（Component Tree）+ 动态交互逻辑（Dynamic Logic）**。

而基于 JSON-Schema 的低代码开发的切入逻辑是：

1. 在特定场景下，大部分前端手动编写的代码是模式化的。
2. 页面组件结构模板和相应数据模型的代码组织，可以替换为**更高效**的JSON语法树描述。
3. 通过制定用于编写的**JSON语法图式（JSON Schema）**，以及封装能够渲染对应 JSON 语法树的运行时工具集，就可以提升开发效率，降低开发技术要求。

我们来看一个组件语法树的示例，通过编写一个简单的 JSON 语法树以及对应的编译器，就可以展示低代码开发的模式。（完整的示例代码参见 [07_low_code](https://github.com/fe-efficiency/lessons_fe_efficiency/tree/master/07_low_code)）

```json
export default {
  type: 'Form',
  props: {
    name: 'form',
    labelCol: { span: 8 },
    wrapperCol: { span: 16 },
  },
  children: [
    {
      type: 'Form.Item',
      props: {
        name: 'gender',
        label: 'Gender',
        rules: [{ required: true }],
      },
      children: [
        {
          type: 'Select',
          props: {
            placeholder: 'Select a option and change input text above',
          },
          children: [
            {
              type: 'Select.Option',
              props: {
                value: 'male',
              },
              children: [
                {
                  type: 'text',
                  value: 'male',
                },
              ],
            },
            {
              type: 'Select.Option',
              props: {
                value: 'female',
              },
              children: [
                {
                  type: 'text',
                  value: 'female',
                },
              ],
            },
            {
              type: 'Select.Option',
              props: {
                value: 'other',
              },
              children: [
                {
                  type: 'text',
                  value: 'other',
                },
              ],
            },
          ],
        },
      ],
    },
    {
      type: 'Form.Item',
      props: {
        wrapperCol: { offset: 8, span: 16 },
      },
      children: [
        {
          type: 'Button',
          props: {
            type: 'primary',
            htmlType: 'submit',
          },
          children: [{ type: 'text', value: 'Submit' }],
        },
        {
          type: 'Button',
          props: {
            htmlType: 'button',
          },
          children: [{ type: 'text', value: 'Reset' }],
        },
      ],
    },
  ],
}
```

### 编写 JSON 开发的高效性

这个高效性主要体现在：

1. 由于只用编写 JSON，而隐藏了前端开发所需的大量技术细节（框架、构建等），因此降低了对开发人员的编码要求，即使是非专业的开发人员，也可以根据示例和文档完成相应页面的开发。
2. 由于只用编写 JSON，大量的辅助代码集成在工具内部，整体上减少了需要生成的代码量。
3. 可以对中后台系统所使用的的常用业务组件进行抽象，然后以示例页面或组件的方式，供用户选择。

### 编写 JSON 开发的缺点

1. **输入效率**：单从组件结构的描述而言，使用 JSON 描述的代码量要多于同等结构的 JSX 语法，对于有经验的前端开发而言，通常无法第一时间感受到效率的提升，甚至还有所下降。
2. **学习记忆成本**：由于引入了新的 JSON 语法图式，无论对于前端开发者、后端开发者还是非专业的人员来说，上手的学习成本都不可避免。此外，不同组件存在不同属性，要在实际编写过程中灵活运用，对记忆量也是一个考验。而反复查阅文档又会造成效率的下降（对于这个问题，有个优化方案是利用 IDE Snippets 的选项功能生成对应的语法提示）。
3. **复用性和可维护性**：对于多页面存在可复用业务组件的情况，在 JSON 编写的模式下往往需要手动复制到各页面 JSON 中，牺牲了复用组件的可维护性。此外，对于功能复杂的页面，对应的 JSON 长度也会让维护体验变得不太美好。
4. **问题排查难度增加**：这个问题涉及面向人群，如果是非专业的人员从事 JSON 的开发过程，当遇到问题时，在如何排查上可能造成阻碍，因此通常需要配备额外的专业人员来提供技术支持。

## 基于可视化操作平台的低代码开发

可视化的低代码操作平台把编写 JSON 的过程变成了拖拽组件和调试属性配置，如下图所示，这样的交互方式对用户来说更直观友好，开发效率也会更高。

![](../imgs/hetu.gif)

### 可视化操作平台的基本使用方式

1. 左侧——组件选择区
2. 中间——预览交互区
3. 右侧——属性编辑区

### 可视化操作平台的生产效率影响因素

1. **功能完备性——产出上限**：开发者不可能在平台里使用组件区没有显示的组件，也不可能创建编辑区不存在的属性。这就迫使平台开发者需要尽可能完整地陈列所有类型的组件，以及通过定义组件类型描述，来获取所有可以被编辑的属性和方法。包括用户交互和数据对组件的影响，这些都需要平台以合适的使用方式提供给用户。
2. **逻辑自洽性——产出质量**：在代码的组织上，不同组件之间不可以任意组合，错误的组合可能导致显示与功能的异常。如果平台只是简单罗列所有组件，而对其中的规则不加以限制，就可能导致用户在使用过程中出现意料外的产出结果。所以，平台开发者需要有一套**完整的组件关联关系表**，并反映到交互呈现中。
3. **交互易用性——产出效率**：尽管大部分低代码平台都提供了相似的区域操作逻辑，但真正影响用户使用效率的往往是很多细节的控制。例如，与单纯依靠光标选取组件相比，在侧边栏提供节点树的方式可以更大程度减少误选；与简单陈列所有组件相比，合适的分类，以及当选择特定组件时筛选出可添加的部分组件，更能减少用户搜索的时间，同时减少可能的出错；一些平台提供了操作栈回放的功能，能减少用户误操作后的修复成本，等等。

## 低代码开发的产品

商用的产品：

1. Kony
2. OutSystems
3. Mendix
4. Appian
5. iVX

开源类的产品：

1. 阿里飞冰
2. 百度 Amis
3. 贝壳河图
4. Vvvebjs
5. react-visual-editor